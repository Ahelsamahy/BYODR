<html>
<head>
    <meta charset="UTF-8">
    <title>Teleop</title>
    <style type="text/css">
        html {
          height: 100%;
          background-image: linear-gradient(to top, white, black);
        }

        body {
          /* background-color: black; */
          /* color: white; */
        }

        .centered {
          position: absolute;
          top: 0;
          left: 50%;
          margin-right: -50%;
          transform: translate(-50%, 0);
        }

        .right {
          float: right;
        }

        .left {
          float: left;
        }

        div#column {
          float: left;
        }

        .message {
          color: #000;
          font-family: Verdana;
          font-size; 13px;
          border: 1px solid #ccc;
          margin-top: 16px;
          margin-bottom: 16px;
          padding: 10px;
        }

        div#console_warning {
          background-color: #ffffcc;
        }

        div#connection_error {
          background-color: #9c2b2e;
        }

        div#bar {
          text-align: center;
          color: white;
          font-family: Verdana;
        }

        img#arrow {
          padding-top: 10px;
        }

        div#max_speed {
          display: inline-block;
          font-size: 8px;
          padding: 5px 10px 0 20px;
        }

        div#current_speed {
          display: inline-block;
          font-size: 8px;
          padding-left: 20px;
          padding-top: 10px;
          padding-right: 40px;
        }

        div#max_speed_value {
          font-size: 30px;
        }

        div#current_speed_value {
          font-size: 30px;
        }

        div#current_speed_units {
          font-size: 8px;
        }

        img#steeringWheel {
          transform: scale(0.8);
          padding: 10px 0 3px 0;
        }

        div#debug_values {
          color: white;
          font-family: "Lucida Console";
          font-size: 10px;
          float: right;
          margin: 5px 0 0 50px;
        }
        div#debug_values > p {
          margin-block-start: 0;
          margin-block-end: 0;
          text-align: right;
        }
        div#stream_links {
          padding-top: 20px;
          text-align: left;
        }
        div#stream_links > a {
            font-family: "Lucida Console";
            font-size: 16px;
        }
        div#stream_links > a:link, a:visited {
            text-decoration: none;
        }
        div#stream_links > a:hover {
            color: blue;
        }
        div#stream_links > a.inactive {
            color: white;
        }
        div#stream_links > a:hover, a:active, a.active {
            color: lightblue;
        }
        div#mjpeg_stream_controls {
            padding: 37px 0 0 20px;
            font-family: "Lucida Console";
            font-size: 15px;
        }
        div#mjpeg_stream_controls > img {
            background: white;
            width: 15px;
            height: 15px;
        }
        div#mjpeg_stream_controls > img#caret_up {
            transform: rotate(180deg);
        }
        div#mjpeg_stream_controls > img#caret_down {
            margin-left: 3px;
        }
        p#autopilot_status {
            font-family: "Arial";
            font-size: 20px;
            font-weight: bold;
            margin-right: 10px;
        }
        div#home_menu {
        }
        img#home_menu_icon {
            margin: 10px 0 0 0;
            width: 50px;
            height: 50px;
        }
    </style>
    <script src="jquery-3.4.1.min.js"></script>
    <script src="performance-polyfill.js?v=0.10"></script>
	<script src="http-live-player.js?v=0.10"></script>
	<script src="index_utils.js?v=0.11"></script>
	<script src="index_gamepad.js?v=0.10"></script>
	<script src="index_teleop.js?v=0.13"></script>
	<script src="index_mjpeg.js?v=0.13"></script>
	<script src="index_h264.js?v=0.11"></script>
</head>
<body>
<div id="container" class="centered">
    <div id="column">
        <div id="connection_error" class="message">Connection lost - please wait or refresh the page.</div>
        <div id="console_warning" class="message">Controller asleep or not detected - please check the connection and press a button.</div>
        <div id="bar">
            <div id="home_menu" class="left">
                <a href="/user_options.htm"><img id="home_menu_icon" src='index-menu.png'/></a>
            </div>
            <div id="stream_links" class="left">
                <a id="video_stream_h264" href="#" onclick="page_utils.set_stream_type('h264'); location.reload();">h264</a><br/>
                <a id="video_stream_mjpeg" href="#" onclick="page_utils.set_stream_type('mjpeg'); location.reload();">mjpeg</a>
            </div>
            <div id="mjpeg_stream_controls" class="left">
                <span id="mjpeg_quality_min_val">0</span>
                <img id="caret_down" src='caret.png' onclick="mjpeg_caret_down();"/>
                <img id="caret_up" src='caret.png' onclick="mjpeg_caret_up();"/>
                <!-- <span id="frame_fps_text">fps:&nbsp;</span>
                <span id="frame_fps">0</span> -->
            </div>
            <img id="arrow"/>
            <div id="max_speed">
                <div id="max_speed_value">0</div>
                <div id="max_speed_text">MAX</div>
            </div>
            <div id="current_speed">
                <div id="current_speed_value">0</div>
                <div id="current_speed_units">km/h</div>
            </div>
            <div id="debug_values">
                <p class="debug_line"><span id="pilot_steering">0</span>&nbsp;ste</p>
                <p class="debug_line"><span id="pilot_throttle">0</span>&nbsp;thr</p>
                <p class="debug_line"><span id="inference_penalty">0</span>&nbsp;pen</p>
                <p class="debug_line"><span id="inference_surprise">0</span>&nbsp;sur</p>
                <p class="debug_line"><span id="inference_critic">0</span>&nbsp;<span id="inference_fallback"></span>&nbsp;</p>
            </div>
            <img id="steeringWheel" class="right"/>
            <p id="autopilot_status" class="right">AP</p>
        </div>
        <div id="camera1"></div>
    </div>
</div>
<script type="text/javascript">
function mjpeg_refresh_page_values() {
    $('span#mjpeg_quality_min_val').text(mjpeg_controller.min_jpeg_quality);
}

function mjpeg_caret_up() {
    mjpeg_controller.set_min_quality(mjpeg_controller.min_jpeg_quality + 5);
    mjpeg_refresh_page_values();
}

function mjpeg_caret_down() {
    mjpeg_controller.set_min_quality(mjpeg_controller.min_jpeg_quality - 5);
    mjpeg_refresh_page_values();
}

$(function () {
    if (page_utils.get_stream_type() == 'mjpeg') {
        $('a#video_stream_mjpeg').addClass('active');
        $('a#video_stream_h264').addClass('inactive');
        mjpeg_refresh_page_values();
        $('div#mjpeg_stream_controls').show();
    } else {
        $('a#video_stream_mjpeg').addClass('inactive');
        $('a#video_stream_h264').addClass('active');
        $('div#mjpeg_stream_controls').hide();
    }
});
</script>
</body>
</html>